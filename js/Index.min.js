var $player,Index={Element:{init:function(){this.openingLogo=$("div.wrap div.openingLogo"),this.logo=$("a.logo"),this.life_logo=$("a.life-logo"),this.fb=$("div.social a").eq(0),this.yt=$("div.social a").eq(1),this.footer_social=$("footer ul").eq(0).find("li"),this.footer_right=$("footer ul").eq(1).find("li"),this.bur=$("a.bur"),this.pcMenu=$("header").find("li"),this.mMenu=$("div.menuBox").find("li"),this.mMenu_icon=$("div.menuBox").find("li:eq(4) a"),this.FixedElement=$("div.fixed-element"),this.index={immediately:$("section.index a.btn")},this.intro={company:$("section.intro a.btn-blue").eq(0),personal:$("section.intro a.btn-blue").eq(1)};var e=$("section.join"),n=$("div.cirBox div.form");0==$("div.cirBox div.form").find("option:selected").val()&&$("div.cirBox div.form").find("select").css("color","#737373"),n.find("select").on("change",function(){$(this).parent().removeClass("warn"),$element.join.form.category=$(this).find("option:selected"),0==Index.Element.join.form.category.val()?$("div.cirBox div.form").find("select").css("color","#737373"):$("div.cirBox div.form").find("select").css("color","#555")}),this.join={step_now:0,step_now_personal:1,form:{category:n.find("option:selected"),name:n.find("input").eq(0),shortname:n.find("input").eq(1),com_url:n.find('input[name="com_url"]')},btn:{personal_left:e.find("div.arrow_personal a.left"),personal_right:e.find("div.arrow_personal a.right"),left:e.find("div.arrow_company a.left"),right:e.find("div.arrow_company a.right"),personal:{login:$("section.join div.main-per:eq(1) a.btn-blue"),agree:$("section.join div.main-per:eq(2) a.btn-blue"),sharetofb:$("section.join div.main-per:eq(3) a.btn-blue")},upload:n.parent().find("a.btn-blue"),reupload:$("div.s2-main").find("a.btn-blue").eq(0),preview:$("div.s2-main").find("a.btn-blue").eq(1),plus:$("div.s2-main").find("a.plus"),minus:$("div.s2-main").find("a.minus"),submit:$("div.s3-main").find("a.btn-blue")},input:{upload:n.parent().find("input#upload")},GetFormData:function(){var e={};for(var n in this.form)e[n]=this.form[n].val();return e}};var t=$("section.company-logo");this.company={category:t.find("div.category"),category_m:t.find("div.category-m")},device.mobile()||(Index.Element.company.category.addClass("hidden"),Index.Element.company.category.removeClass("show"))}},Var:{},Data:{hosturl:null,lang:"zh",form_type:void 0,url_list:{logo:null,logo2:null,fb:null,tvc:null,youtube:null,contact:"https://wildaid.org/",privacy:"http://www.wildaidchina.org/"},fbInfo:{id:"",name:"",email:""},person_list:[],init:function(n){-1!=location.origin.indexOf("webgene")?this.hosturl="https://wildaid.webgene.com.tw":this.hosturl="https://globalsharkpledge.org";var t=this.url_list;this.lang=vueApp.$route.name,$.ajax({async:!0,type:"GET",url:Index.Data.hosturl+"/api/count_user",dataType:"json",success:function(e){$("div.navBox .count p span").text(e.user_count.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","))},error:function(e){console.log(e)}}),$.ajax({async:!0,type:"POST",url:Index.Data.hosturl+"/api/url_list",dataType:"json",complete:function(){},success:function(e){t.fb=e[0].fb,t.tvc="https://www.youtube.com/watch?v="+Index.Function.GetYoutubeID(e[0].tvc),t.logo=e[0].logo,t.logo2=e[0].logo2,t.youtube=e[0].youtube,n()},error:function(){}})}},Function:{GotoStep:function(n,t){var e=$("section.join div.content.contentCompany"),o=Index.Element.join.step_now;$element.join.btn.left.css("pointer-events","none"),$element.join.btn.right.css("pointer-events","none"),$element.join.btn.minus.css("pointer-events","none"),$element.join.btn.plus.css("pointer-events","none"),$element.join.btn.preview.css("pointer-events","none"),$element.join.btn.reupload.css("pointer-events","none"),$element.join.btn.upload.css("pointer-events","none"),$element.join.btn.submit.css("pointer-events","none"),e.eq(o).fadeOut("slow",function(){e.eq(n).fadeIn("slow",function(){switch(Index.Element.join.step_now=n){case 0:$element.join.btn.left.addClass("hidden"),$element.join.btn.left.css("pointer-events","none"),$element.join.input.upload.val(),$element.join.btn.right.addClass("hidden"),$element.join.btn.right.css("pointer-events","none");break;case 1:gapage("corporation_resize"),$element.join.btn.left.removeClass("hidden"),$element.join.btn.left.css("pointer-events","auto"),$element.join.btn.right.addClass("hidden"),$element.join.btn.right.css("pointer-events","none");var e=$Fabric.Var.finBox;e.item(0)&&(e.item(0).text=Index.Element.join.form.shortname.val(),e.renderAll());break;case 2:gapage("corporation_preview"),$element.join.btn.left.removeClass("hidden"),$element.join.btn.left.css("pointer-events","auto"),$element.join.btn.right.addClass("hidden"),$element.join.btn.right.css("pointer-events","none");break;case 3:gapage("corporation_finish"),ga_data.isFinish=!0,$element.join.btn.left.addClass("hidden"),$element.join.btn.right.addClass("hidden"),$element.join.btn.left.css("pointer-events","none"),$element.join.btn.right.css("pointer-events","none")}$element.join.btn.minus.css("pointer-events","auto"),$element.join.btn.plus.css("pointer-events","auto"),$element.join.btn.preview.css("pointer-events","auto"),$element.join.btn.reupload.css("pointer-events","auto"),$element.join.btn.upload.css("pointer-events","auto"),$element.join.btn.submit.css("pointer-events","auto"),t()})})},GotoStep_personal:function(e,n){var t=$("section.join div.content:eq(0)").find(".main-per"),o=Index.Element.join.step_now_personal;t.eq(o).fadeOut("slow",function(){t.eq(e).fadeIn("slow",function(){switch(Index.Element.join.step_now_personal=e){case 2:gapage("Individual_preview");break;case 3:gapage("Individual_finish")}n()})})},GetYoutubeID:function(e){return!!e.match(/^(?:https?:\/\/)?(?:(?:www|m)\.)?(?:youtu\.be\/|youtube(?:-nocookie)?\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/)&&RegExp.$1},ShowPopup:function(e){$(".popup").find(".inner p").html(e),$(".popup").fadeIn()},appendPersonalUser:function(e){var n=["#e95464","#e8ecef","#84b9cb","#aacf53","#f8b862"],t=[18,22,26],o=90*Math.random(),a=(new Date).getTime(),i=Math.floor(Math.random()*n.length),r=Math.floor(Math.random()*t.length),l=Math.floor(10*Math.random())+15,s=l-5,c=e.caption;e.caption={"拒吃、拒買野生動物產製品":{zh:"拒吃、拒買野生動物產製品",en:"Not to eat shark fin soup and serve shark fin soup at any banquets hosted by me"},"願共同守護鯊魚，愛護海洋":{zh:"共同愛護鯊魚，守護海洋",en:"To save sharks and the oceans"},"我不吃魚翅，也不以魚翅宴請他人":{zh:"拒吃魚翅，也不以魚翅宴請他人",en:"Not to eat and buy wildlife products"}}[c][Index.Data.lang];var d='<div class="userBox personalUser" id="user'+a+'" style="color:'+n[i]+"; font-size:"+t[r]+'px">\t<span class="photo">\t\t<img src="'+e.logo_pic+'" alt="">\t</span> \t<span>'+e.name+'</span>\t<span class="user-caption" data-caption="'+c+'" >：'+e.caption+"</span> </div>";$("section.personal").append(d),this.animatePersonalUser($("#user"+a),o,device.mobile()?s:l)},animatePersonalUser:function(e,n,t){new TweenMax.set(e,{top:n+"%",onComplete:function(){new TweenMax.from(e,t,{left:"100%",ease:Linear.easeNone,onComplete:function(){$(this.target).remove()}})}})}},Listener:{init:function(){$element=Index.Element,$function=Index.Function,$data=Index.Data,device.desktop()||$("section.index div.platebg").hide(),$(".popup").find("a.btn-blue").on("click",function(e){e.preventDefault(),$(".popup").fadeOut()}),$element.bur.click(function(e){e.preventDefault(),e.stopPropagation(),$(this).hasClass("active")?(gapage(ga_data.prePage),$(".logoBox").removeClass("disappear"),0!=window.scrollY&&$("header").addClass("scrolled")):(gapage("menu"),$("header").removeClass("scrolled"),$(".logoBox").addClass("disappear")),$(this).toggleClass("active"),$(".overlay").toggleClass("open"),Index.Element.FixedElement.find("div.scroll").toggle()});var t=600,e=$("header").height(),o=$(".intro").offset().top,a=$(".intro").offset().top-(e/2+10),i=$(".join").offset().top,r=$(".personal").offset().top-5;1300<$(window).width()&&(r+=25),device.mobile()&&(a-=e,r-=e,i-=75),device.desktop()&&(i+=e/2+10,-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome")&&(r=$(".personal").offset().top-(e/2+10))),device.tablet()&&(a=a-e/2-30,r=r-e/2-15),$element.pcMenu.on("click",function(e){e.preventDefault(),e.stopPropagation(),$ScrollMagic.Temp.scolling=!0,setTimeout(function(){$ScrollMagic.Temp.scolling=!1},700),$(this).parent().find("li a").removeClass("active"),$(this).find("a").addClass("active");-1!=navigator.userAgent.indexOf("Safari")&&navigator.userAgent.indexOf("Chrome");var n=$("html, body");switch($(this).index()){case 0:gaclick("menu_about"),n.stop().animate({scrollTop:a},600);break;case 1:gaclick("menu_join"),n.stop().animate({scrollTop:i},600);break;case 2:gaclick("menu_member"),n.stop().animate({scrollTop:r},600);break;case 3:gaclick("menu_video"),$.magnificPopup.open({type:"iframe",removalDelay:160,preloader:!1,fixedContentPos:!1,items:{src:"https://www.youtube.com/watch?v="+("zh"==vueApp.$route.name?story_bar.currentUrl_zh:story_bar.currentUrl_en)},callbacks:{beforeClose:function(){-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome")?$("html").removeClass("overflowhidden"):($("html").removeClass("overflowhidden"),$("body").removeClass("overflowhidden"))},open:function(){-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome")?$("html").addClass("overflowhidden"):($("html").addClass("overflowhidden"),$("body").addClass("overflowhidden")),$player=null,$player=new YT.Player("player",{events:{onStateChange:function(e){switch(e.data){case YT.PlayerState.ENDED:}}}}),story_bar.function.createStory(".mfp-content")},close:function(){}}});break;case 4:n.stop().animate({scrollTop:o},600);break;case 5:gaclick("menu_fb"),window.open(Index.Data.url_list.fb);break;case 6:gaclick("menu_yt"),window.open(Index.Data.url_list.youtube)}}),$element.mMenu.on("click",function(e){e.preventDefault(),e.stopPropagation(),$ScrollMagic.Temp.scolling=!0,setTimeout(function(){$ScrollMagic.Temp.scolling=!1},700),$(this).parent().find("li a").removeClass("active"),$(this).find("a").addClass("active");var n=$(this).index();3!=n&&setTimeout(function(){$element.bur.click()},900),setTimeout(function(){switch(-1!=navigator.userAgent.indexOf("Safari")&&navigator.userAgent.indexOf("Chrome"),n){case 0:gaclick("menu_about"),$("html, body").stop().animate({scrollTop:a},t);break;case 1:gaclick("menu_join"),$("html, body").stop().animate({scrollTop:i},t);break;case 2:gaclick("menu_member"),$("html, body").stop().animate({scrollTop:r},t);break;case 3:gaclick("menu_video"),$.magnificPopup.open({type:"iframe",removalDelay:160,preloader:!1,fixedContentPos:!1,items:{src:"https://www.youtube.com/watch?v="+("zh"==vueApp.$route.name?story_bar.currentUrl_zh:story_bar.currentUrl_en)},callbacks:{beforeClose:function(){-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome")?$("html").removeClass("overflowhidden"):($("html").removeClass("overflowhidden"),$("body").removeClass("overflowhidden"))},open:function(){-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome")?$("html").addClass("overflowhidden"):($("html").addClass("overflowhidden"),$("body").addClass("overflowhidden")),story_bar.function.createStory(".mfp-content")},close:function(){}}})}},t)}),$element.mMenu_icon.on("click",function(e){switch(e.preventDefault(),e.stopPropagation(),$(this).index()){case 0:$(".bur").removeClass("active"),$(".overlay").removeClass("open"),$("html, body").stop().animate({scrollTop:o},t);break;case 1:gaclick("menu_fb"),window.open(Index.Data.url_list.fb);break;case 2:gaclick("menu_yt"),window.open(Index.Data.url_list.youtube)}}),$(".lang a").on("click",function(e){e.preventDefault(),e.stopPropagation();var n=$(this);n.data("lang")!=vueApp.$route.name&&(vueApp.$router.push({name:n.data("lang")}),$("a.bur").hasClass("active")&&$element.bur.click());var t={"拒吃、拒買野生動物產製品":{zh:"拒吃、拒買野生動物產製品",en:"Not to eat shark fin soup and serve shark fin soup at any banquets hosted by me"},"願共同守護鯊魚，愛護海洋":{zh:"共同愛護鯊魚，守護海洋",en:"To save sharks and the oceans"},"我不吃魚翅，也不以魚翅宴請他人":{zh:"拒吃魚翅，也不以魚翅宴請他人",en:"Not to eat and buy wildlife products"}};$.each($(".user-caption"),function(){$(this).text("： "+t[$(this).data("caption")][vueApp.$route.name])})}),$element.index.immediately.on("click",function(e){e.preventDefault(),gaclick("index_go"),$("html, body").stop().animate({scrollTop:i},t)});var n=function(e){e.preventDefault();var n=$(this);$("html, body").stop().animate({scrollTop:i},t),setTimeout(function(){switch(n.index()){case 1:return gaclick("index_Individual_go"),void $("section.join div.main-per:eq(0) div.cirBox a.btn-blue").eq(0).click();case 0:return gaclick("index_corporation_go"),void $("section.join div.main-per:eq(0) div.cirBox a.btn-blue").eq(1).click()}},300)};$element.intro.company.on("click",n),$element.intro.personal.on("click",n),$("section.join div.main-per:eq(0) div.cirBox a.btn-blue").on("click",function(e){switch(e.preventDefault(),$(this).index()-1){case 0:return gapage("Individual_join"),Index.Data.form_type="personal",0!=Index.Element.join.step_now&&($element.join.btn.left.addClass("hidden"),$element.join.btn.right.addClass("hidden")),$("section.join .content").hide(),$("section.join .main-per").hide(),$("section.join .main-per").eq(1).show(),Index.Element.join.step_now_personal=1,void $("section.join .content").eq(0).fadeIn("slow",function(){});case 1:return gapage("corporation_join"),Index.Data.form_type="company",$("section.join .content").hide(),3==Index.Element.join.step_now&&(Index.Element.join.step_now=0),void $function.GotoStep($element.join.step_now,function(){})}});$element.join.btn.personal.login.on("click",function(e){e.preventDefault(),gaclick("Individual_join_upload"),isFacebookApp()||isLineApp()?Index.Function.ShowPopup("zh"==vueApp.$route.name?"建議使用Safari、Chrome或預設瀏覽器瀏覽本網站，以利活動參與。":"Please visit this site with default browser."):FB.login(function(e){e.authResponse?FB.api("/me",{fields:"id,name,email"},function(e){var n,t;console.log(e),Index.Data.fbInfo=e,n=e.name,t=e.id,$(".main-per:eq(2)").find(".cirBox p").text(n),$(".main-per:eq(3)").find(".cirBox .name p:eq(1)").text(n),$(".main-per:eq(2)").find(".cirBox div.photo img").attr("src","https://graph.facebook.com/"+t+"/picture?type=large"),Index.Function.GotoStep_personal(2,function(){})}):console.log("User cancelled login or did not fully authorize.")},{scope:"email"})}),$element.join.btn.personal.agree.on("click",function(e){e.preventDefault(),gaclick("Individual_preview_comfirm");var n=["我不吃魚翅，也不以魚翅宴請他人","拒吃、拒買野生動物產製品","願共同守護鯊魚，愛護海洋"][Math.floor(3*Math.random())];$.ajax({async:!0,type:"POST",url:Index.Data.hosturl+"/api/send_user",dataType:"json",data:{fbid:Index.Data.fbInfo.id,name:Index.Data.fbInfo.name,logo_pic:"https://graph.facebook.com/"+Index.Data.fbInfo.id+"/picture?type=large",email:Index.Data.fbInfo.email,caption:n},success:function(e){"110"!=e.status||Index.Function.ShowPopup("zh"==vueApp.$route.name?"您已經連署過囉！<br />謝謝您對海洋保育的幫助！":"You have joined the Pledge,<br />thank you for your support in ocean conservation!"),Index.Function.GotoStep_personal(3,function(){var e={name:Index.Data.fbInfo.name,logo_pic:"https://graph.facebook.com/"+Index.Data.fbInfo.id+"/picture?type=large",caption:n};setTimeout(function(){Index.Function.appendPersonalUser(e),Index.Data.person_list.push(e)},1e3)})},error:function(){console.log("error")}})}),$element.join.btn.personal.sharetofb.on("click",function(e){e.preventDefault(),gaclick("Individual_finish_fbshare"),FB.ui({method:"share",href:"https://globalsharkpledge.org"},function(e){0==e.length?alert("分享成功!"):console.log("user clicked cancel")})}),$element.join.btn.left.addClass("hidden"),$element.join.btn.right.addClass("hidden"),$element.join.btn.personal_left.addClass("hidden"),$element.join.btn.personal_right.addClass("hidden"),$element.join.btn.left.on("click",function(e){e.preventDefault(),$function.GotoStep($element.join.step_now-1,function(){})}),$element.join.btn.right.on("click",function(e){e.preventDefault(),$function.GotoStep($element.join.step_now+1,function(){})}),$element.join.btn.personal_left.on("click",function(e){e.preventDefault()}),$element.join.btn.personal_right.on("click",function(e){e.preventDefault()}),$("section.join a.del_pos").hide(),$("section.join a.del_pos").bind("touchstart mousedown",function(e){e.preventDefault(),$(this).parent().find("input").val(""),$(this).hide()}),$element.join.form.name.on("input paste focus",function(){$(this).val()?$(this).parent().find("a.del_pos").show():$(this).parent().find("a.del_pos").hide()}),$element.join.form.name.on("input paste",function(){$(this).parent().removeClass("warn")}),$element.join.form.name.on("blur",function(){$(this).parent().find("a.del_pos").hide()}),$element.join.form.shortname.on("input paste focus",function(){$(this).val()?$(this).parent().find("a.del_pos").show():$(this).parent().find("a.del_pos").hide()}),$element.join.form.shortname.on("blur",function(){$(this).parent().find("a.del_pos").hide()}),$element.join.form.shortname.on("input paste",function(){$(this).parent().removeClass("warn")}),$element.join.input.upload.on("change",function(e){if(this.files&&this.files[0])if(2<this.files[0].size/1024/1024)alert("照片最大僅支持2MB");else{var n=e.target.files[0],t=new FileReader;t.onload=function(e){var n=e.target.result;$Fabric.Temp.ScaleNow=6,$(".range").val(6),$(".scale .cir").css("left","50%"),$canvas=$Fabric.Var.finBox,$canvas.item(1)&&$canvas.remove($canvas.item(1)),Index.Function.GotoStep(1,function(){var e=Index.Element.join.form.shortname.val();$Fabric.Function.Create(e,function(){$Fabric.Function.UploadImage(n,function(){})})})},t.readAsDataURL(n)}}),$element.join.btn.upload.on("click",function(e){e.preventDefault(),gaclick("corporation_join_upload"),$element.join.input.upload.val("");var n=$("section.join").find("li");n.removeClass("warn");var t=Validation.Result();if(t.Status)$element.join.input.upload.click();else{var o="",a=t.Resp;for(var i in a)switch(o+=a[i][0]+"<br>",i){case"category":n.eq(0).addClass("warn");break;case"name":n.eq(1).addClass("warn");break;case"shortname":n.eq(2).addClass("warn")}Index.Function.ShowPopup(o)}}),$(".range").on("change input",function(){var e=$Fabric.Temp.ScaleNow,n=parseInt($(this).val(),10),t=$Fabric.Var.finBox,o=$Fabric.Temp.ScaleStep;if(e<n){var a=n-e;$Fabric.Var.finBox.item(1).scaleX=$Fabric.Var.finBox.item(1).scaleX+o*a,$Fabric.Var.finBox.item(1).scaleY=$Fabric.Var.finBox.item(1).scaleY+o*a}if(n<e){a=e-n;$Fabric.Var.finBox.item(1).scaleX=$Fabric.Var.finBox.item(1).scaleX-o*a,$Fabric.Var.finBox.item(1).scaleY=$Fabric.Var.finBox.item(1).scaleY-o*a}t.renderAll(),$Fabric.Temp.ScaleNow=n,$(".range").val(n)}),$element.join.btn.minus.on("click",function(e){if(e.preventDefault(),0!=$Fabric.Temp.ScaleNow){$Fabric.Var.finBox;var n=$Fabric.Temp.ScaleStep;$Fabric.Var.finBox.item(1).scaleX=$Fabric.Var.finBox.item(1).scaleX-n,$Fabric.Var.finBox.item(1).scaleY=$Fabric.Var.finBox.item(1).scaleY-n,$Fabric.Var.finBox.renderAll();var t=$(".scale .cir"),o=($Fabric.Temp.ScaleNow,$Fabric.Temp.ScaleNow-1);$Fabric.Temp.ScaleNow=o,t.css("left",8.334*o+"%"),$(".range").val(o)}}),$element.join.btn.plus.on("click",function(e){if(e.preventDefault(),6!=$Fabric.Temp.ScaleNow){$Fabric.Var.finBox;var n=$Fabric.Temp.ScaleStep;$Fabric.Var.finBox.item(1).scaleX=$Fabric.Var.finBox.item(1).scaleX+n,$Fabric.Var.finBox.item(1).scaleY=$Fabric.Var.finBox.item(1).scaleY+n,$Fabric.Var.finBox.renderAll();var t=$(".scale .cir"),o=($Fabric.Temp.ScaleNow,$Fabric.Temp.ScaleNow+1);$Fabric.Temp.ScaleNow=o,t.css("left",8.334*o+"%"),$(".range").val(o)}}),$element.join.btn.reupload.on("click",function(e){e.preventDefault(),gaclick("corporation_join_reupload"),$element.join.input.upload.val(""),$element.join.btn.upload.click()}),$element.join.btn.preview.on("click",function(e){e.preventDefault(),gaclick("corporation_join_preview"),Index.Function.GotoStep(2,function(){$Fabric.Function.GetDataURL_Preview(function(e){var n=$("div.s3-main").find("div.finBox img"),t=$("div.s3-main").find("p.comp-name span"),o=Index.Element.join.form;switch(Index.Element.join.data={shortname:o.shortname.val(),name:o.name.val(),com_url:o.com_url.val()},Index.Element.join.form.category.val()){case"1":Index.Element.join.data.category="批發零售業";break;case"2":Index.Element.join.data.category="交通運輸業";break;case"3":Index.Element.join.data.category="住宿餐飲業";break;case"4":Index.Element.join.data.category="食品業";break;case"5":Index.Element.join.data.category="金融業";break;case"6":Index.Element.join.data.category="旅遊業";break;case"7":Index.Element.join.data.category="教育藝文業";break;case"8":Index.Element.join.data.category="電信業";break;case"9":Index.Element.join.data.category="廣告/設計/公關經紀業";break;case"10":Index.Element.join.data.category="娛樂攝影業";break;case"11":Index.Element.join.data.category="非營利單位";break;case"12":Index.Element.join.data.category="其他";break;case"13":Index.Element.join.data.category="房地產業";break;case"14":Index.Element.join.data.category="印刷出版業";break;case"15":Index.Element.join.data.category="廣播電視業";break;case"16":Index.Element.join.data.category="專門設計相關業"}var a=Index.Element.join.data;t.text(a.shortname+" / "+a.category),n.attr("src",e)})})}),$element.join.btn.submit.on("click",function(e){e.preventDefault(),gaclick("corporation_send");var t=Index.Element.join.data;$Fabric.Function.GetDataURL_Result(Index.Element.join.data.shortname,function(e){var n=Index.Element.join.btn;$.ajax({async:!0,type:"POST",url:Index.Data.hosturl+"/api/send_logo",dataType:"json",data:{name:t.name,short_name:t.shortname,classify:t.category,com_num:t.taxid,com_url:t.com_url,logo_pic:e.split(",")[1],o_logo_pic:$Fabric.Temp.ori_logo.split(",")[1],caption:t.statement},beforeSend:function(){n.submit.val("資料傳送中..."),n.submit.css("pointer-events","none")},success:function(){Index.Function.GotoStep(3,function(){$("div.s4-main").find("div.fin-img img").attr("src",$Fabric.Temp.PreviewDataURL)})},error:function(){console.log("ajax error")}})})}),$element.company.category.find("li").on("click",function(e){e.preventDefault(),$(".userBox").remove(),$TweenMax.Company.KillAll($("section.company-logo li.item")),$element.company.category.find("li").find("a").removeClass("active"),$(this).find("a").addClass("active"),0==$(this).index()?$Mixitup.Function.filter("all"):$Mixitup.Function.filter(".category-"+$(this).data("category")),$ScrollMagic.Scenes.company.duration($("section.company-logo").height())}),$element.company.category_m.find("select").on("change",function(e){e.preventDefault(),$TweenMax.Company.KillAll($("section.company-logo li.item")),$index=this.value,$element.company.category.find("li").find("a").removeClass("active"),$(this).find("a").eq($index).addClass("active"),0==$index?$Mixitup.Function.filter("all"):$Mixitup.Function.filter(".category-"+$index)})}},Setup:function(){this.Data.init(function(){var n=Index.Data.url_list;device.tablet()&&(Index.Element.pcMenu.eq(3).on("touchstart mousedown",function(e){e.preventDefault(),Index.Element.pcMenu.eq(3).click()}),Index.Element.mMenu.eq(3).on("touchstart mousedown",function(e){e.preventDefault(),Index.Element.mMenu.eq(3).click()})),Index.Element.logo.click(function(e){e.preventDefault(),window.open(n.logo),gaclick("menu_Logo")}),Index.Element.life_logo.click(function(e){e.preventDefault(),window.open(n.logo2)}),Index.Element.fb.click(function(e){e.preventDefault(),window.open(n.fb),gaclick("menu_fb")}),Index.Element.yt.click(function(e){e.preventDefault(),window.open(n.youtube),gaclick("menu_yt")}),Index.Element.footer_social.click(function(e){switch(e.preventDefault(),$(this).index()){case 0:window.open(n.fb),gaclick("menu_fb");break;case 1:window.open(n.youtube),gaclick("menu_yt")}}),Index.Element.footer_right.click(function(e){switch(e.preventDefault(),$(this).index()){case 0:gaclick("contact_us"),window.open(n.contact);break;case 1:gaclick("privacy_policy "),$("div.privacy").fadeIn()}}),$(".btn-join").on("click",function(e){e.preventDefault();-1!=navigator.userAgent.indexOf("Safari")&&navigator.userAgent.indexOf("Chrome"),gaclick("index_join"),$("html, body").stop().animate({scrollTop:$(".join").offset().top},600)}),$("div.privacy").find("a.closeBtn").on("click",function(e){e.preventDefault(),$("div.privacy").fadeOut()})}),this.Element.init(),this.Listener.init(),$.ajax({async:!0,type:"GET",url:Index.Data.hosturl+"/api/user_caption",dataType:"json",complete:function(){},beforeSend:function(){},success:function(e){Index.Data.person_list=e,setInterval(function(){if(document.hasFocus()){var e=Math.floor(Math.random()*Index.Data.person_list.length);Index.Function.appendPersonalUser(Index.Data.person_list[e])}},350*(Math.floor(3*Math.random())+5))},error:function(e){console.log(e)}})}};-1!=location.origin.indexOf("webgene")?Index.Data.hosturl="https://wildaid.webgene.com.tw":Index.Data.hosturl="https://globalsharkpledge.org",$(function(){}),window.onload=function(){var t=function(){Index.Element.openingLogo.fadeOut("slow",function(){$("html").removeClass("overflowhidden"),$("body").removeClass("overflowhidden"),$(".index .ttBox").addClass("drawed"),$(".index .ttBox").css("box-shadow","0 9px 6px -6px #2a4464"),$TweenMax.Intro.init(0,function(){!function(){var e,n=/\+/g,t=/([^&=]+)=?([^&]*)/g,o=function(e){return decodeURIComponent(e.replace(n," "))},a=window.location.search.substring(1);for(urlParams={};e=t.exec(a);)urlParams[o(e[1])]=o(e[2]);"true"==urlParams.create&&($("section.join div.main-per:eq(0) div.cirBox a.btn-blue").eq(1).click(),Index.Element.pcMenu.eq(1).click(),$("section.join select option").each(function(){$(this).text()==urlParams.classify&&(console.log(urlParams.classify),$(this).attr("selected",!0),Index.Element.join.form.category.val($(this).val()),Index.Element.join.form.category.text(urlParams.classify))}),Index.Element.join.form.name.val(urlParams.name),Index.Element.join.form.shortname.val(urlParams.shortname))}()})})};device.desktop()&&$(".category-m").hide(),device.tablet()&&$(".company-logo").css("background-attachment","inherit"),Index.Element.openingLogo=$("div.wrap div.openingLogo");var o=["../img/opening-bg1.jpg","../img/opening-bg2.jpg","../img/opening-bg3.jpg","./asset/svg/logo-b.svg","./asset/svg/life-logo.svg"];device.mobile()&&(o=["../img/opening-bg1_m.jpg","../img/opening-bg2_m.jpg","../img/opening-bg3_m.jpg","./asset/svg/logo-b.svg","./asset/svg/life-logo.svg"]);var a=2,i=[],r=device.mobile()?"_m":"",e=null;e=-1!=location.origin.indexOf("webgene")?"https://wildaid.webgene.com.tw":"https://globalsharkpledge.org",$.ajax({async:!0,type:"GET",url:e+"/api/logoTop4",dataType:"json",complete:function(){},beforeSend:function(){},success:function(e){$.each(e,function(e,n){o.push(Index.Data.hosturl+"/"+n.logo_pic.substring(3,n.logo_pic.length)),i.push(Index.Data.hosturl+"/"+n.logo_pic.substring(3,n.logo_pic.length))}),$.preload(o,function(e){e&&$(".loadingPage").fadeOut(0,function(){$(".openingLogo .partner").css("background-image","url("+i[0]+")"),$(".openingLogo .partner").fadeIn(0,function(){var n=setInterval(function(){if(3==a)return clearInterval(n),$(".openingLogo").css("background-image","url(./img/opening-bg"+a+r+".jpg)"),void $(".openingLogo .partner").fadeOut(500,function(){$(".ttBox").addClass("drawed"),setTimeout(function(){$TweenMax.tt.init(1200,function(){t()})},1200)});a<=2&&($(".openingLogo").css("background-image","url(./img/opening-bg"+a+r+".jpg)"),$(".openingLogo .partner").css("background-image","url("+i[a-1]+")"),a++)},1e3);$(".openingLogo").on("click",function(e){e.preventDefault(),a=3,clearInterval(n),t()})})})})},error:function(e){console.log(e)}})};
//# sourceMappingURL=Index.min.js.map