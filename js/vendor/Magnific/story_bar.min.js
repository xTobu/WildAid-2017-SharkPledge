var story_bar={ajaxData:[],current:"",currentUrl_zh:"",currentUrl_en:"",lang:window.location.hash.split("/")[1],function:{createStoryUser:function(r,a,t,n){return story_bar.lang!=n?"":'<a class="story-bar__a" href="https://www.youtube.com/watch?v='+r+'">    <div class="story-bar__user">        <div class="story-bar__user-avatar '+(story_bar.current==t?"story-bar__active":"")+'" style="background-image: url('+a+')"></div>        <div class="story-bar__user-name" style="display:none"><span>'+t+"</span></div>    </div></a>"},createLangBtn:function(r){return story_bar.ajaxData.forEach(function(a){a.name==story_bar.current&&("zh"==r&&a.lang==r&&(story_bar.currentUrl_zh=a.url),"en"==r&&a.lang==r&&(story_bar.currentUrl_en=a.url))}),"<a class='lang-bar__a' href='https://www.youtube.com/watch?v="+("zh"==r?story_bar.currentUrl_zh:story_bar.currentUrl_en)+"'><div class='lang-bar__circle "+(story_bar.lang==r?"lang-bar__active":"")+"'><span>"+("zh"==r?"中":"En")+"</span></div></a>"},createStory:function(r){$(".story-bar").remove(),$(".lang-bar").remove(),$(r).append(story_bar.div()),$(".story-bar__a").on("click",function(){var r=$(this).find(".story-bar__user-name span").text();story_bar.current=r}),$(".lang-bar__a").on("click",function(){0==$(this).index()&&(story_bar.lang="zh"),1==$(this).index()&&(story_bar.lang="en")}),$(".story-bar__a,.lang-bar__a").magnificPopup({type:"iframe"}),$.magnificPopup.instance.open=function(r){function a(r){switch(r.data){case YT.PlayerState.ENDED:}}$.magnificPopup.proto.open.call(this,r),story_bar.function.createStory(".mfp-content"),$player=null,$player=new YT.Player("player",{events:{onStateChange:a}})}},updateData:function(r,a,t){story_bar.current=r,story_bar.currentUrl_en=a,story_bar.currentUrl_zh=t},calcYoutube:function(r){var a=/^(?:https?:\/\/)?(?:(?:www|m)\.)?(?:youtu\.be\/|youtube(?:-nocookie)?\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/;return!!r.match(a)&&RegExp.$1}},div:function(){var r=document.createElement("div");return r.classList.add("story-bar"),$.each(story_bar.ajaxData,function(a,t){var n=story_bar.function.createStoryUser(t.url,t.pic,t.name,t.lang);r.insertAdjacentHTML("beforeend",n)}),r.outerHTML+"<div class='lang-bar'>"+this.function.createLangBtn("zh")+this.function.createLangBtn("en")+"</div>"},init:function(){$.ajax({async:!0,type:"GET",url:Index.Data.hosturl+"/api/youtube",dataType:"json",complete:function(){},success:function(r){$.each(r,function(r,a){a.url=story_bar.function.calcYoutube(a.url),story_bar.ajaxData.push(a)}),story_bar.function.updateData("昆凌","ush6xLxXvrs","bgOHPcraP8U")},error:function(){}})}};$(function(){story_bar.init()});